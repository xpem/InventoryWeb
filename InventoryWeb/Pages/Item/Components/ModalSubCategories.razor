@using InventoryWeb.Utils
@using Models.DTO

<div class="modal fade" data-bs-backdrop="static" data-bs-keyboard="false" id="ModalSubCategories" tabindex="-1" aria-labelledby="ModalSubCategories" aria-hidden="true">
	<div class="modal-dialog modal-dialog-scrollable">
		<div class="modal-content">
			<div class="modal-header" style="background-color: var(--bs-primary-bg-subtle); color: #fff ">
				<h1 class="modal-title fs-5" id="exampleModalLabel">Sub Categorias</h1>
				<button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
			</div>
			<div class="modal-body">
				<div class="list-group">
					@if (SelectedCategory is not null && SelectedCategory.SubCategories is not null)
					{
						<a class="list-group-item list-group-item-action" href="#" data-bs-dismiss="modal" @onclick="() => OnSelectSubCategory.InvokeAsync(null)">
							<div class="row">
								<div class="col text-start" style="display: flex; align-items: center;">
									<div class="category-circle-md" style="background: @SelectedCategory.Color; display: flex; justify-content: center; align-items: center; margin-right: 10px;">
									</div>
									[ @SelectedCategory.Name ]
								</div>
							</div>
						</a>

						@foreach (var subCategory in SelectedCategory.SubCategories)
						{
							<a class="list-group-item list-group-item-action" href="#" data-bs-dismiss="modal" @onclick="() => OnSelectSubCategory.InvokeAsync(subCategory.Id)">
								<div class="row">
									<div class="col text-start" style="display: flex; align-items: center;">
										<div class="category-circle-md" style="background: @SelectedCategory.Color; display: flex; justify-content: center; align-items: center; margin-right: 10px;">
											<i class="fa-solid fa-@(SubCategoryIconsList.GetIconFaName(subCategory.IconName) ?? "tag")" style="font-size: 20px; color: white;"></i>
										</div>
										@subCategory.Name
									</div>
								</div>
							</a>
						}
					}
				</div>
			</div>
			<div class="modal-footer">
				<button type="button" class="btn btn-secondary" data-bs-target="#ModalCategories" data-bs-toggle="modal" style="color: #fff"><i class="bi bi-arrow-left-short"></i> Voltar</button>
			</div>
		</div>
	</div>
</div>

@code {
	[Parameter]
	public CategoryDTO? SelectedCategory { get; set; }

	[Parameter]
	public EventCallback<int?> OnSelectSubCategory { get; set; }
}